<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add UPI</title>
    <style>
        body { margin: 0; background-color: #1a1a1a; color: white; font-family: Arial, sans-serif; }
        .header { display: flex; align-items: center; padding: 15px; background: #222; }
        .container { padding: 20px; }
        .input-group { margin-bottom: 20px; }
        .label { font-size: 14px; margin-bottom: 8px; display: block; color: #aaa; }
        .input-field { background: #2a2a2a; border: 1px solid #444; border-radius: 8px; padding: 15px; width: 100%; box-sizing: border-box; color: white; outline: none; }
        .save-btn { position: fixed; bottom: 0; left: 0; width: 100%; background: #f3d078; color: #3d2a00; padding: 18px; border: none; font-size: 16px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <div class="header">
        <a href="withdraw.html" style="color:white; text-decoration:none; margin-right:20px;">❮</a>
        <span>Add UPI</span>
    </div>

    <div class="container">
        <div class="input-group">
            <span class="label">UPI Name</span>
            <input type="text" id="u_name" class="input-field" placeholder="Enter Name">
        </div>
        <div class="input-group">
            <span class="label">Phone Number</span>
            <input type="number" id="u_phone" class="input-field" placeholder="Enter Phone">
        </div>
        <div class="input-group">
            <span class="label">UPI ID</span>
            <input type="text" id="u_id" class="input-field" placeholder="Enter UPI ID">
        </div>
    </div>

    <button class="save-btn" onclick="sendToAdmin()">Save Details</button>

    <script>
        function sendToAdmin() {
            const name = document.getElementById('u_name').value;
            const phone = document.getElementById('u_phone').value;
            const upi = document.getElementById('u_id').value;

            if(!name || !phone || !upi) { alert("Please fill all details"); return; }

            // ब्राउज़र में दिखाने के लिए सेव करें
            localStorage.setItem('saved_upi_name', name);
            localStorage.setItem('saved_upi_id', upi);

            // Node.js सर्वर (Admin) को भेजें
            fetch('/save-upi', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name, phone, upi })
            })
            .then(() => { 
                alert("Data Saved Successfully!");
                window.location.href = 'withdraw.html'; 
            })
            .catch(err => {
                console.error(err);
                window.location.href = 'withdraw.html';
            });
        }
    </script>
</body>
</html>
